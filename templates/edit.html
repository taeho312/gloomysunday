{% extends "base.html" %}
{% block content %}
<div class="write-section" style="max-width: 900px; margin: 50px auto;">
    <h2 class="auth-title">RE-RECORD</h2>
    <form id="edit-form" method="POST">
        <div id="editor-wrapper" style="background: rgba(10, 26, 18, 0.5); border: 1px solid rgba(224, 134, 31, 0.2);">
            <div id="editor" style="height: 400px; color: #f0f0f0;">
                {{ post.content|safe }}
            </div>
        </div>
        <input type="hidden" name="content" id="content">
        <div style="margin-top: 30px; display: flex; gap: 20px;">
            <button type="submit" class="auth-btn" style="width: auto; padding: 12px 40px;">기록 수정</button>
            <a href="{{ url_for('index') }}" style="color: #888; text-decoration: none;">취소</a>
        </div>
    </form>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        var Font = Quill.import('attributors/style/font');
        var Size = Quill.import('attributors/style/size');
        var fonts = ['Nanum Gothic', 'Nanum Myeongjo', 'Gothic A1', 'Hahmlet', 'Song Myung', 'Hurricane', 'Meddon', 'Estonia', 'Rock Salt', 'Playwrite IN Guides', 'Coral Pixels', 'Ma Shan Zheng', 'Zhi Mang Xing'];
        var sizes = ['9pt', '10pt', '12pt', '14pt', '16pt', '20pt', '24pt', '32pt', '40pt', '48pt', 'manual'];

        Font.whitelist = fonts; Size.whitelist = sizes;
        Quill.register(Font, true); Quill.register(Size, true);

        var quill = new Quill('#editor', {
            theme: 'snow',
            modules: {
                toolbar: [[{ 'font': fonts }], [{ 'size': sizes }], ['bold', 'italic', 'underline'], [{ 'color': [] }], ['clean']]
            }
        });

        document.getElementById('edit-form').onsubmit = function() {
            document.getElementById('content').value = quill.root.innerHTML;
        };
    });
</script>
{% endblock %}